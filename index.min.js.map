{
  "version": 3,
  "sources": ["index.ts"],
  "sourcesContent": ["let instances = new Set<LightDarkToggle>(),\n    getPreference = () => localStorage['ldt:prefers'] ?? matchMedia(`(prefers-color-scheme: dark)`).matches ? 'dark' : 'light',\n    d = document,\n    meta = d.querySelector<HTMLMetaElement>(`[name=\"color-scheme\"]`) ?? \n    d.head.insertAdjacentElement(\n        'beforeend', \n        Object.assign(d.createElement('meta'), { name: 'color-scheme', content: getPreference() }\n    )\n) as HTMLMetaElement,\n    render = () => requestAnimationFrame(() => instances.forEach(i => i._render())),\n    reflect = false;\nexport class LightDarkToggle extends HTMLElement {\n    constructor() {\n        super();\n        reflect ||= this.getAttribute('reflect') === 'local'\n    }\n\n    static define(name = 'light-dark-toggle') {\n        window.customElements.define(name, this)\n    }\n\n    _render() {\n\t\tthis.innerHTML = `<button>${meta.content}</button>`\n    }\n    \n\t_toggle = () => {\n        meta.content = meta.content === 'dark' ? 'light' : 'dark'\n\t\treflect && (localStorage['ldt:prefers'] = meta.content);\n        render()\n    }\n\n    connectedCallback() {\n        this.addEventListener('click', this._toggle, true);\n        instances.add(this)\n\t\tthis._render()\n    }\n\n    disconnectedCallback() {\n\t\tthis.removeEventListener('click', this._toggle, true)\n\t\tinstances.delete(this)\n    }\n}"],
  "mappings": "AAAA,IAAIA,EAAY,IAAI,IAChBC,EAAgB,IAAM,aAAa,aAAa,GAAK,WAAW,8BAA8B,EAAE,QAAU,OAAS,QACnHC,EAAI,SACJC,EAAOD,EAAE,cAA+B,uBAAuB,GAC/DA,EAAE,KAAK,sBACH,YACA,OAAO,OAAOA,EAAE,cAAc,MAAM,EAAG,CAAE,KAAM,eAAgB,QAASD,EAAc,CAAE,CAC5F,CACJ,EACIG,EAAS,IAAM,sBAAsB,IAAMJ,EAAU,QAAQK,GAAKA,EAAEC,EAAQ,CAAC,CAAC,EAC9EC,EAAU,GACP,MAAMC,UAAwB,WAAY,CAC7C,aAAc,CACV,MAAM,EACND,IAAY,KAAK,aAAa,SAAS,IAAM,OACjD,CAEA,OAAO,OAAOE,EAAO,oBAAqB,CACtC,OAAO,eAAe,OAAOA,EAAM,IAAI,CAC3C,CAEAH,GAAU,CACZ,KAAK,UAAY,WAAWH,EAAK,OAAO,WACtC,CAEHO,EAAU,IAAM,CACTP,EAAK,QAAUA,EAAK,UAAY,OAAS,QAAU,OACzDI,IAAY,aAAa,aAAa,EAAIJ,EAAK,SACzCC,EAAO,CACX,EAEA,mBAAoB,CAChB,KAAK,iBAAiB,QAAS,KAAKM,EAAS,EAAI,EACjDV,EAAU,IAAI,IAAI,EACxB,KAAKM,EAAQ,CACX,CAEA,sBAAuB,CACzB,KAAK,oBAAoB,QAAS,KAAKI,EAAS,EAAI,EACpDV,EAAU,OAAO,IAAI,CACnB,CACJ",
  "names": ["instances", "getPreference", "d", "meta", "render", "i", "_render", "reflect", "LightDarkToggle", "name", "_toggle"]
}
