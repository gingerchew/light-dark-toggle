{
  "version": 3,
  "sources": ["index.ts"],
  "sourcesContent": ["let instances = new Set<LightDarkToggle>(),\n    ls = localStorage,\n    getPreference = () => ls.ldt ?? matchMedia(`(prefers-color-scheme: dark)`).matches ? 'dark' : 'light',\n    d = document,\n    meta = ((m) => {\n        m ??= d.head.insertAdjacentElement(\n            'beforeend', \n            Object.assign(d.createElement('meta'), { name: 'color-scheme', content: getPreference() })\n        ) as HTMLMetaElement\n        m.content !== ls.ldt && (m.content = ls.ldt);\n        return m;\n    })(d.querySelector<HTMLMetaElement>(`[name=\"color-scheme\"]`)),\n    render = () => requestAnimationFrame(() => instances.forEach(i => i._render())),\n    reflect = false;\n\nexport class LightDarkToggle extends HTMLElement {\n    constructor() {\n        super();\n        reflect ||= this.getAttribute('reflect') === 'local'\n    }\n\n    static define(name = 'light-dark-toggle') {\n        window.customElements.define(name, this)\n    }\n\n    _render() {\n\t\tthis.innerHTML = `<button>${meta.content}</button>`\n    }\n    \n\t_toggle = () => {\n        meta.content = meta.content === 'dark' ? 'light' : 'dark'\n\t\treflect && (ls.ldt = meta.content);\n        render()\n    }\n\n    connectedCallback() {\n        this.addEventListener('click', this._toggle, true);\n        instances.add(this)\n\t\tthis._render()\n    }\n\n    disconnectedCallback() {\n\t\tthis.removeEventListener('click', this._toggle, true)\n\t\tinstances.delete(this)\n    }\n}"],
  "mappings": "AAAA,IAAIA,EAAY,IAAI,IAChBC,EAAK,aACLC,EAAgB,IAAMD,EAAG,KAAO,WAAW,8BAA8B,EAAE,QAAU,OAAS,QAC9FE,EAAI,SACJC,GAASC,IACLA,IAAMF,EAAE,KAAK,sBACT,YACA,OAAO,OAAOA,EAAE,cAAc,MAAM,EAAG,CAAE,KAAM,eAAgB,QAASD,EAAc,CAAE,CAAC,CAC7F,EACAG,EAAE,UAAYJ,EAAG,MAAQI,EAAE,QAAUJ,EAAG,KACjCI,IACRF,EAAE,cAA+B,uBAAuB,CAAC,EAC5DG,EAAS,IAAM,sBAAsB,IAAMN,EAAU,QAAQO,GAAKA,EAAEC,EAAQ,CAAC,CAAC,EAC9EC,EAAU,GAEP,MAAMC,UAAwB,WAAY,CAC7C,aAAc,CACV,MAAM,EACND,IAAY,KAAK,aAAa,SAAS,IAAM,OACjD,CAEA,OAAO,OAAOE,EAAO,oBAAqB,CACtC,OAAO,eAAe,OAAOA,EAAM,IAAI,CAC3C,CAEAH,GAAU,CACZ,KAAK,UAAY,WAAWJ,EAAK,OAAO,WACtC,CAEHQ,EAAU,IAAM,CACTR,EAAK,QAAUA,EAAK,UAAY,OAAS,QAAU,OACzDK,IAAYR,EAAG,IAAMG,EAAK,SACpBE,EAAO,CACX,EAEA,mBAAoB,CAChB,KAAK,iBAAiB,QAAS,KAAKM,EAAS,EAAI,EACjDZ,EAAU,IAAI,IAAI,EACxB,KAAKQ,EAAQ,CACX,CAEA,sBAAuB,CACzB,KAAK,oBAAoB,QAAS,KAAKI,EAAS,EAAI,EACpDZ,EAAU,OAAO,IAAI,CACnB,CACJ",
  "names": ["instances", "ls", "getPreference", "d", "meta", "m", "render", "i", "_render", "reflect", "LightDarkToggle", "name", "_toggle"]
}
